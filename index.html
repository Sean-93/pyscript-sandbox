<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- BOOTSTRAP CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
    <!-- PYSCRIPT CSS -->
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <!-- PYSCRIPT ENV -->
    <py-env>
        - datetime
        - matplotlib
        - pandas
        - yfinance
    </py-env>
    <title>My PyScript Sandbox</title>
  </head>
  <body class="container">
    <br />
    <strong>
      <h1>	&#x2666; &#x2666; &#x2666; PyScript! &#x2666; &#x2666; &#x2666;</h1>
    </strong>
    <br />
    <p>
      Now that Python can be run in the browser, I made a little space where it
      can be showcased!
    </p>
    <br />
    <!-- PYSCRIPT DISPLAY CARD -->
    <div class="card p-4">


        <py-script> 
            
            print('Hello, PyScript!') 
            
            #PRINT CURRENT DATE
            from datetime import datetime
            now = datetime.now()
            now.strftime("%m/%d/%Y, %H:%M:%S")
            
            import pandas as pd
            import matplotlib.pyplot as plt
            from datetime import datetime
            plt.style.use('seaborn')
            import yfinance as yf

            import pandas as pd
            import matplotlib.pyplot as plt
            from datetime import datetime
            plt.style.use('seaborn')
            import yfinance as yf
            
            securities = ['xom', 'cvx', 'mpc', 'hfc', 'clr']
            
            df = pd.DataFrame()
            
            today = datetime.now().date().strftime("%Y-%m-%d")
            
            for security in securities:
                df[security] = yf.Ticker(security).history(start="2020-01-01", end=today).Close
            
            plt.figure()
            plt.plot(df)
            plt.ylabel('Price ($)')
            plt.xlabel('Year')
            plt.show()

        </py-script>


    </div>
    <!-- BOOTSTRAP JS -->
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
    <!-- PYSCRIPT JS -->
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
  </body>
</html>
